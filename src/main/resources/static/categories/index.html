<!DOCTYPE html>
<html>
<head>
<title>Categories</title>
</head>
<body>
	<h2>Categories</h2>
	<a href="create.html">Add Category</a>

	<table border="1">
		<thead>
			<tr>
				<th>Name</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody id="categoryTable"></tbody>
	</table>

	<script>
function loadCategories() {
  fetch("/api/categories")
    .then(res => res.json())
    .then(data => {
      const table = document.getElementById("categoryTable");
      table.innerHTML = "";
      data.forEach(c => {
        table.innerHTML += `
          <tr>
            <td>${c.categoryTitle}</td>
            <td>
              <a href="edit.html?id=${c.categoryId}">Edit</a> |
              <button onclick="deleteCategory(${c.categoryId})">Delete</button>
            </td>
          </tr>`;
      });
    });
}

function deleteCategory(id) {
  if (!confirm("Delete this category?")) return;

  fetch(`/api/categories/${id}`, { method: "DELETE" })
    .then(() => loadCategories());
}

loadCategories();
</script>

</body>
</html>
